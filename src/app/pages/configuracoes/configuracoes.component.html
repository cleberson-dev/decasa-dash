<nb-card>
  <nb-card-header>Configurações</nb-card-header>
  <nb-card-body class="settings-card">
    <div class="card-group">
      <h1 class="card-group-header">
        <div>
          <nb-icon icon="layers-outline" class="icon"></nb-icon>
          Geral
        </div>
        <div>
          <button  
            nbButton size="small"
            [status]="getSaveButtonStatus(saveStatuses.geral)"
            (click)="handleSave('geral')" 
          >
            <nb-icon [icon]="getSaveIcon(saveStatuses.geral)"></nb-icon>
            {{ getSaveText(saveStatuses.geral) }}
          </button>
        </div>
      </h1>
    </div>
    <div class="card-group vendas">
      <h1 class="card-group-header">
        <div>
          <nb-icon icon="cube-outline" class="icon"></nb-icon>
          Vendas
        </div>
        <div>
          <button  
            nbButton size="small"
            [status]="getSaveButtonStatus(saveStatuses.vendas)"
            (click)="handleSave('vendas')" 
          >
            <nb-icon [icon]="getSaveIcon(saveStatuses.vendas)"></nb-icon>
            {{ getSaveText(saveStatuses.vendas) }}
          </button>
        </div>
      </h1>
      <table class="enderecos-table">
        <colgroup>
          <col class="full" />
          <col />
          <col />
          <col />
        </colgroup>
        <thead>
          <tr>
            <th>Endereço</th>
            <th>Balcão?</th>
            <th>Online?</th>
            <th>Entregas</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let endereco of enderecos">
            <td>{{ endereco.nome }}</td>
            <td>
              <nb-checkbox [(checked)]="endereco.balcao"></nb-checkbox>
            </td>
            <td>
              <nb-checkbox [(checked)]="endereco.online"></nb-checkbox>
            </td>
            <td>
              <nb-button-group ghost size="small" > 
                <button nbButtonToggle [pressed]="endereco.tipo === 'retira'" (pressedChange)="handleTipoChange('retira', endereco, $event)">Cliente Retira</button>
                <button nbButtonToggle [pressed]="endereco.tipo === 'entrega'" (pressedChange)="handleTipoChange('entrega', endereco, $event)">Loja Entrega</button>
                <button nbButtonToggle [pressed]="endereco.tipo === 'nenhum'" (pressedChange)="handleTipoChange('nenhum', endereco, $event)">Nenhum</button>
              </nb-button-group>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="card-group financeiro">
      <h1 class="card-group-header">
        <div>
          <nb-icon icon="shopping-cart-outline" class="icon"></nb-icon>
          Financeiro
        </div>
        <div>
          <button  
            nbButton size="small"
            [status]="getSaveButtonStatus(saveStatuses.financeiro)"
            (click)="handleSave('financeiro')" 
          >
            <nb-icon [icon]="getSaveIcon(saveStatuses.financeiro)"></nb-icon>
            {{ getSaveText(saveStatuses.financeiro) }}
          </button>
        </div>
      </h1>
      <h2>Caixas</h2>
      <form style="width: 100%; margin-bottom: 8px;" [formGroup]="caixaForm" (submit)="onCaixaFormSubmit()">
        <div class="row">
          <div class="col-3">
            <input nbInput fullWidth placeholder="Número" formControlName="numero" />
          </div>
          <div class="col-3">
            <nb-select fullWidth placeholder="Selecione uma loja" formControlName="loja">
              <nb-option *ngFor="let loja of lojas" [value]="loja.value">{{ loja.title }}</nb-option>
            </nb-select>
          </div>
          <div class="col-3">
            <nb-select fullWidth placeholder="Selecione uma colaborador" formControlName="colaborador">
              <nb-option *ngFor="let colaborador of colaboradores" [value]="colaborador.value">{{ colaborador.nome }}</nb-option>
            </nb-select>
          </div>
          <div class="col-3">
            <button nbButton status="primary" size="small" style="margin: auto;" type="submit" [disabled]="caixaForm.invalid">
              <nb-icon icon="plus"></nb-icon>
            </button>
          </div>
        </div>
      </form>
      <ul class="caixas-list">       
        <li *ngFor="let caixa of caixas" class="caixa">
          <p><span>Número</span> {{ caixa.numero }}</p>
          <p><span>Loja</span> {{ caixa.loja }}</p>
          <p><span>Colaborador</span> {{ caixa.colaborador }}</p>
        </li>
      </ul>
      
    </div>
    <div class="card-group">
      <h1 class="card-group-header">
        <div>
          <nb-icon icon="people-outline" class="icon"></nb-icon>
          Colaboradores
        </div>
        <div>
          <button  
            nbButton size="small"
            [status]="getSaveButtonStatus(saveStatuses.colaboradores)"
            (click)="handleSave('colaboradores')" 
          >
            <nb-icon [icon]="getSaveIcon(saveStatuses.colaboradores)"></nb-icon>
            {{ getSaveText(saveStatuses.colaboradores) }}
          </button>
        </div>
      </h1>
    </div>
  </nb-card-body>
  <nb-card-footer>
    <button nbButton status="primary" (click)="saveAll()" size="small">
      <nb-icon icon="save"></nb-icon>
      Salvar todos
    </button>
  </nb-card-footer>
</nb-card>
